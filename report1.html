<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Active Issue Report</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f9fafb;
            margin: 0;
            padding: 40px;
            color: #333;
        }
        
        .container {
            max-width: 700px;
            margin: auto;
        }
        
        h2 {
            font-size: 22px;
            margin-bottom: 5px;
        }
        
        p.subtext {
            color: #666;
            font-size: 14px;
            margin-bottom: 20px;
        }
        
        .go-back {
            display: inline-block;
            margin-bottom: 20px;
            text-decoration: none;
            background: #e5e7eb;
            color: #111;
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(37, 99, 235, 0.3);
        }
        
        .go-back:hover {
            background: #d1d5db;
            box-shadow: 0 6px 14px rgba(37, 99, 235, 0.4);
            transform: translateY(-2px);
        }
        
        .card {
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px) scale(1.02);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .tags {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }
        
        .tag {
            font-size: 12px;
            padding: 4px 10px;
            border-radius: 20px;
            font-weight: bold;
        }
        
        .gray {
            background: #f0f0f0;
            color: #444;
        }
        
        .red {
            background: red;
            color: #fff;
        }
        
        .yellow {
            background: blue;
            color: white;
        }
        
        .title {
            font-size: 18px;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .location {
            color: #2a5dff;
            font-size: 14px;
            margin-bottom: 15px;
        }
        
        .desc {
            font-size: 14px;
            color: #444;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .meta {
            display: flex;
            justify-content: space-between;
            font-size: 13px;
            color: #555;
            margin-bottom: 15px;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .supporters {
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 13px;
            color: #555;
            margin-bottom: 20px;
        }
        
        .actions {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        
        .btn {
            padding: 10px 18px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: 0.2s;
        }
        
        .btn-blue {
            background: #2563eb;
            color: #fff;
        }
        
        .btn-blue:hover {
            background: #1e4ed8;
        }
        
        .btn-outline {
            border: 1px solid #ddd;
            background: #fff;
        }
        
        .btn-outline:hover {
            background: #f5f5f5;
        }
        
        .btn-green {
            background: #10b981;
            color: #fff;
        }
        
        .btn-green:hover {
            background: #059669;
        }
        /* New styles for comment section */
        
        .comment-section {
            margin-top: 25px;
            border-top: 1px solid #eee;
            padding-top: 20px;
        }
        
        .comment-form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .comment-form textarea {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-family: Arial, sans-serif;
            resize: vertical;
            min-height: 80px;
        }
        
        .comment-form button {
            align-self: flex-start;
            padding: 8px 16px;
            background: #2563eb;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .comments-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .comment {
            padding: 12px;
            background: #f9f9f9;
            border-radius: 6px;
            margin-bottom: 10px;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 12px;
            color: #666;
        }
        
        .comment-content {
            font-size: 14px;
            line-height: 1.4;
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            background: #10b981;
            color: white;
            border-radius: 6px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            opacity: 0;
            transform: translateY(-20px);
            transition: opacity 0.3s, transform 0.3s;
            z-index: 1000;
        }
        
        .notification.show {
            opacity: 1;
            transform: translateY(0);
        }
        
        .support-btn {
            background: #8b5cf6;
            color: white;
        }
        
        .support-btn:hover {
            background: #7c3aed;
        }
        
        .support-btn.supported {
            background: #10b981;
        }
    </style>
</head>

<body>
    <div class="container">
        <h2>Active Issue Report</h2>
        <p class="subtext">Community members have reported the following infrastructure concern. Your support helps prioritize municipal response efforts. Managing the issues shall be done by the officers.</p>

        <!-- Go Back Button -->
        <a href="admin.html" class="go-back">‚¨Ö Go Back</a>

        <div class="card">
            <!-- Tags -->
            <div class="tags">
                <span class="tag gray">Road Infrastructure</span>
                <span class="tag gray">#issue-01</span>
                <span class="tag red">High</span>
                <span class="tag yellow">Reported</span>
            </div>

            <!-- Title -->
            <div class="title">Pothole on Main Street causing traffic delays</div>

            <!-- Location -->
            <div class="location">üìç Main Street & 3rd Avenue, Downtown</div>

            <!-- Description -->
            <p class="desc">
                Large pothole approximately 3 feet wide has developed on Main Street near the intersection with 3rd Avenue. The pothole is causing significant traffic delays as vehicles swerve to avoid it, creating a safety hazard for both drivers and cyclists. Water
                accumulation during rain makes the situation worse.
            </p>

            <!-- Metadata -->
            <div class="meta">
                <span>üìÖ Reported: March 15, 2024</span>
                <span>üõ†Ô∏è Est. Resolution: March 22, 2024</span>
            </div>

            <!-- Supporters -->
            <div class="supporters">
                <span>üë• <span id="supporters-count">47</span> supporters</span>
                <span>üí¨ <span id="comments-count">12</span> comments</span>
            </div>

            <!-- Action Buttons -->
            <div class="actions">
                <button class="btn btn-blue">Assign this Issue</button>
                <button class="btn" style="background-color: rgb(248, 11, 11); color: white;">Terminate</button>
                <button class="btn" style="background-color: orange; color: white;">Hold this Issue</button>
                <button class="btn" style="background-color: rgb(39, 193, 39); color: white;">Progress</button>
                <button class="btn support-btn" id="support-btn">Support the Issue</button>
            </div>

            <!-- Comment Section -->
            <div class="comment-section">
                <h3>Add a Comment</h3>
                <div class="comment-form">
                    <textarea id="comment-text" placeholder="Type your comment here..."></textarea>
                    <button id="submit-comment">Submit Comment</button>
                </div>

                <h3>Comments</h3>
                <div class="comments-list" id="comments-container">
                    <!-- Comments will be added here dynamically -->
                    <div class="comment">
                        <div class="comment-header">
                            <span>Officer Smith</span>
                            <span>March 16, 2024</span>
                        </div>
                        <div class="comment-content">
                            We've inspected the pothole and will schedule repairs for next week.
                        </div>
                    </div>
                    <div class="comment">
                        <div class="comment-header">
                            <span>Resident #2471</span>
                            <span>March 15, 2024</span>
                        </div>
                        <div class="comment-content">
                            This pothole damaged my tire yesterday. Please fix it ASAP!
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification -->
    <div class="notification" id="notification">Comment submitted successfully!</div>

    <script>
        // DOM elements
        const commentText = document.getElementById('comment-text');
        const submitComment = document.getElementById('submit-comment');
        const commentsContainer = document.getElementById('comments-container');
        const commentsCount = document.getElementById('comments-count');
        const supportersCount = document.getElementById('supporters-count');
        const supportBtn = document.getElementById('support-btn');
        const notification = document.getElementById('notification');

        // Initial comments data
        let comments = [{
            user: "Officer Smith",
            date: "March 16, 2024",
            content: "We've inspected the pothole and will schedule repairs for next week."
        }, {
            user: "Resident #2471",
            date: "March 15, 2024",
            content: "This pothole damaged my tire yesterday. Please fix it ASAP!"
        }];

        let supporters = 47;
        let isSupported = false;

        // Update comments count
        function updateCommentsCount() {
            commentsCount.textContent = comments.length;
        }

        // Update supporters count
        function updateSupportersCount() {
            supportersCount.textContent = supporters;
        }

        // Show notification
        function showNotification(message) {
            notification.textContent = message;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        // Add a new comment
        function addComment(user, content) {
            const date = new Date().toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });

            comments.unshift({
                user,
                date,
                content
            });

            // Create new comment element
            const commentEl = document.createElement('div');
            commentEl.className = 'comment';
            commentEl.innerHTML = `
                <div class="comment-header">
                    <span>${user}</span>
                    <span>${date}</span>
                </div>
                <div class="comment-content">${content}</div>
            `;

            // Add to the top of comments list
            commentsContainer.insertBefore(commentEl, commentsContainer.firstChild);

            // Update count
            updateCommentsCount();

            // Show success message
            showNotification("Comment submitted successfully!");
        }

        // Toggle support
        function toggleSupport() {
            if (isSupported) {
                supporters--;
                supportBtn.classList.remove('supported');
                supportBtn.textContent = "Support the Issue";
                showNotification("You're no longer supporting this issue");
            } else {
                supporters++;
                supportBtn.classList.add('supported');
                supportBtn.textContent = "Supported ‚úì";
                showNotification("You're now supporting this issue!");
            }

            isSupported = !isSupported;
            updateSupportersCount();
        }

        // Event listeners
        submitComment.addEventListener('click', () => {
            const content = commentText.value.trim();

            if (content) {
                addComment("Current User", content);
                commentText.value = "";
            }
        });

        supportBtn.addEventListener('click', toggleSupport);

        // Initialize counts
        updateCommentsCount();
        updateSupportersCount();
    </script>
</body>

</html>